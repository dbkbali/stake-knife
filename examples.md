# Examples - wallet

## Notes


## Global Parameters
- CLI parameters are validated depending on the bls mode specified - either 01 or 02
- the default format is files if --format is not specified if --format is json no files will be created but json will be output to stdout
- the default output directory is ./output if --output-dir is not specified
- the mnemonic is generated by default if not specified as a 24 word mnemonic
- the password is required and must be at least 8 characters long
- the withdrawal address is required and must be a valid Eth1 address starting with 0x
- the wallet/keystore encryption can be specified with --kdf and will use scrypt by default. For more performant keystore generation use pbkdf2
- the chain can be specified with --chain and will use mainnet by default
- the validator index can be specified with --validator-index and will use 0 by default as the starting index


## Validation for BLS mode = 01
- eth amount per validator/keystore must be 32 ETH or multiples of 32 ETH
- if the eth amount is greater than 32 eth but a multiple of 32 then the tool will automatically create validator keys for each multiple of 32 from the specified validator-index or 0 by default
- the validator-count parameter is optional when providing a total ETH amount that is a multiple of 32 (the tool will calculate the correct number of validators)
- for each validator a keystore and deposit data object will be created and stored in a deposit data file if no format is set or format is set to files

### Valid Examples - BLS Mode 01

```bash
# Basic example - single validator with 32 ETH
stake-knife wallet generate --eth-amounts 32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01

# Multiple validators (3) with total 96 ETH - validator count is optional and calculated automatically
stake-knife wallet generate --eth-amounts 96 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01

# Multiple validators with custom starting index (validator count calculated automatically)
stake-knife wallet generate --eth-amounts 64 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01 --validator-index 5

# Multiple validators with individual ETH amounts (all must be 32)
stake-knife wallet generate --eth-amounts 32,32,32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01 --validator-count 3

# With custom mnemonic
stake-knife wallet generate --eth-amounts 32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01 --mnemonic "abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon art"

# Output as JSON
stake-knife wallet generate --eth-amounts 32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01 --format json

# With custom KDF mode for faster keystore generation
stake-knife wallet generate --eth-amounts 32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01 --kdf pbkdf2
```

### Invalid Examples - BLS Mode 01

```bash
# Invalid: ETH amount not a multiple of 32
stake-knife wallet generate --eth-amounts 33 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01

# Invalid: ETH amount less than 32
stake-knife wallet generate --eth-amounts 16 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01

# Invalid: Explicitly specified validator count doesn't match calculated count from ETH amount
stake-knife wallet generate --eth-amounts 96 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01 --validator-count 2

# Invalid: Individual ETH amounts not all 32
stake-knife wallet generate --eth-amounts 32,64,32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01 --validator-count 3

# Invalid: Number of ETH amounts doesn't match validator count
stake-knife wallet generate --eth-amounts 32,32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01 --validator-count 3

# Invalid: Password too short
stake-knife wallet generate --eth-amounts 32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password short --bls-mode 01

# Invalid: Invalid withdrawal address
stake-knife wallet generate --eth-amounts 32 --withdrawal-address invalid-address --password testpassword123 --bls-mode 01
```


## Validation for BLS mode = 02
- eth amount per validator/keystore must be between 32 and 2048 ETH
- if no validator-count is specified the tool assumes you only want to create 1 validator and will error if the eth amount is not between 32 and 2048
- if a validator-count is specified you must also specify the eth-amounts with individual amounts per validator or a total amount to be divided evenly
- for each validator a keystore and deposit data object will be created and stored in a deposit data file if no format is set or format is set to files

### Valid Examples - BLS Mode 02

```bash
# Basic example - single validator with 32 ETH
stake-knife wallet generate --eth-amounts 32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02

# Single validator with more than 32 ETH
stake-knife wallet generate --eth-amounts 64 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02

# Maximum ETH amount for a single validator
stake-knife wallet generate --eth-amounts 2048 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02

# Multiple validators with total ETH amount (distributed evenly)
stake-knife wallet generate --eth-amounts 96 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02 --validator-count 3

# Multiple validators with individual ETH amounts
stake-knife wallet generate --eth-amounts 32,64,128 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02 --validator-count 3

# Multiple validators with custom starting index
stake-knife wallet generate --eth-amounts 32,64,128 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02 --validator-count 3 --validator-index 5

# Output as JSON
stake-knife wallet generate --eth-amounts 64 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02 --format json
```

### Invalid Examples - BLS Mode 02

```bash
# Invalid: ETH amount less than 32
stake-knife wallet generate --eth-amounts 31 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02

# Invalid: ETH amount greater than 2048
stake-knife wallet generate --eth-amounts 2049 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02

# Invalid: Individual ETH amount outside allowed range
stake-knife wallet generate --eth-amounts 32,2049,64 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02 --validator-count 3

# Invalid: Number of ETH amounts doesn't match validator count
stake-knife wallet generate --eth-amounts 32,64 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02 --validator-count 3

# Invalid: Total ETH amount would result in less than 32 ETH per validator
stake-knife wallet generate --eth-amounts 64 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 02 --validator-count 3

# Invalid: Password too short
stake-knife wallet generate --eth-amounts 64 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password short --bls-mode 02

# Invalid: Invalid withdrawal address
stake-knife wallet generate --eth-amounts 64 --withdrawal-address invalid-address --password testpassword123 --bls-mode 02
```

### Global Parameter Invalid Examples

```bash
# Invalid: Missing required withdrawal address
stake-knife wallet generate --eth-amounts 32 --password testpassword123 --bls-mode 01

# Invalid: Missing required password
stake-knife wallet generate --eth-amounts 32 --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --bls-mode 01

# Invalid: Missing required eth-amounts
stake-knife wallet generate --withdrawal-address 0x71C7656EC7ab88b098defB751B7401B5f6d8976F --password testpassword123 --bls-mode 01
```
